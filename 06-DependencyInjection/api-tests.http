### Variables
@baseUrl = http://localhost:5195
@tenantA = tenant-a
@tenantB = tenant-b

### Test 1: Create task for Tenant A
POST {{baseUrl}}/tasks
X-Tenant-Id: {{tenantA}}
Content-Type: application/json

{
  "title": "First Task",
  "description": "First task for Tenant A",
  "type": "urgent"
}

### Test 2: Create task for Tenant B
POST {{baseUrl}}/tasks
X-Tenant-Id: {{tenantB}}
Content-Type: application/json

{
  "title": "Setup Task for B",
  "description": "First task for Tenant B",
  "type": "scheduled"
}

### Test 3: Get diagnostics for Tenant A
GET {{baseUrl}}/diagnostics
X-Tenant-Id: {{tenantA}}

### Test 4: Get diagnostics for Tenant B
GET {{baseUrl}}/diagnostics
X-Tenant-Id: {{tenantB}}

### Test 5: Get task 1 as Tenant A
GET {{baseUrl}}/tasks/1
X-Tenant-Id: {{tenantA}}

### Test 6: Try to get Tenant A's task as Tenant B (should fail)
GET {{baseUrl}}/tasks/1
X-Tenant-Id: {{tenantB}}

### Test 7: Validation test - missing title (should fail)
POST {{baseUrl}}/tasks
X-Tenant-Id: {{tenantA}}
Content-Type: application/json

{
  "description": "No title provided",
  "type": "urgent"
}

### Test 8: Multiple requests for singleton verification
GET {{baseUrl}}/diagnostics
X-Tenant-Id: {{tenantA}}

### Test 9: Another request for singleton verification
GET {{baseUrl}}/diagnostics
X-Tenant-Id: {{tenantA}}

### Test 10: Cache test - create task
POST {{baseUrl}}/tasks
X-Tenant-Id: {{tenantA}}
Content-Type: application/json

{
  "title": "Cache Test Task",
  "description": "Testing cache behavior",
  "type": "urgent"
}

### Test 11: Cache test - first get (cache miss)
GET {{baseUrl}}/tasks/2
X-Tenant-Id: {{tenantA}}

### Test 12: Cache test - second get (cache hit)
GET {{baseUrl}}/tasks/2
X-Tenant-Id: {{tenantA}}

### Test 13: Get all tasks from tenant A
GET {{baseUrl}}/tasks
X-Tenant-Id: {{tenantA}}

### Test 14: Get all tasks from tenant B
GET {{baseUrl}}/tasks
X-Tenant-Id: {{tenantB}}

### Test 15: Update task 1 from tenant A
PUT {{baseUrl}}/tasks
X-Tenant-Id: {{tenantA}}
Content-Type: application/json

{
  "id": 1,
  "title": "Task Alpha",
  "description": "First task for Tenant A",
  "type": "urgent"
}

### Test 16: Update task 1 all three parameters from tenant A
PUT {{baseUrl}}/tasks
X-Tenant-Id: {{tenantA}}
Content-Type: application/json

{
  "id": 1,
  "title": "Revised Task Alpha",
  "description": "Target finish all previous missed tasks",
  "type": "scheduled"
}

### Test 17: Delete task 1 from tenant A
DELETE {{baseUrl}}/tasks/1
X-Tenant-Id: {{tenantA}}

